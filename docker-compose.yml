version: '3.4'

services:
  ntu.iot.web:
    image: ${DOCKER_REGISTRY-}ntuiot15
    build:
      context: .
      dockerfile: NTU.IoT.Web/Dockerfile
    networks:
      - multi-nodes_iot
    volumes:
      - dataprotectionkeys:/root/.aspnet/DataProtection-Keys
    ports:
      - "2377:2377" 
networks:
  multi-nodes_iot:
    external:
      name: multi-nodes_iot
volumes:
  dataprotectionkeys: